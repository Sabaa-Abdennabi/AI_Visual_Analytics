<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Heatmap sur background image</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: auto;
      height: 100%;
    }

    #container {
      position: relative;
      width: 100%;
      background-image: url('site3.png'); /* Ton image ici */
      background-repeat: no-repeat;
      background-position: top left;
      background-size: contain; 
    }

    #heatmapContainer {
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 10;
    }
  </style>
</head>
<body>

<div id="container">
  <div id="heatmapContainer"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/heatmap.js@2.0.5/build/heatmap.min.js"></script>
<script>
  const imageUrl = 'site3.png';

  const RAW_POINTS = [
  [0.0, 0.0, 2243.91],
[0.0, 0.0, 2243.91],
[0.0, 0.0, 2243.91],
[0.0, 0.0, 684811042.29],
[0.0, 0.0, 950149631.34],
[0.0, 0.0, 842564903.05],
[57.59, 0.0, 780228596.78],
[42.59, 0.0, 616114344.59],
[42.59, 42.0, 808959363.57],
[43.59, 42.0, 753362831.99],
[57.59, 42.0, 358371900.02],
[57.59, 42.0, 358371900.02],
[57.59, 42.0, 358371900.02],
[57.59, 42.0, 2243.91],
[57.59, 42.0, 67016803.2],
[153.75, 42.0, 2243.91],
[153.75, 42.0, 2243.91],
[304.98, 42.0, 2243.91],
[304.98, 42.0, 37660281.16],
[429.61, 42.0, 2243.91],
[429.61, 42.0, 11859025.4],
[562.66, 53.09, 425359591.11],
[562.66, 53.09, 425359591.11],
[0.0, 0.0, 348824019.1],
[1865.41, 0.0, 1894176.02],
[240.0, 0.0, 135910088.53],
[255.0, 0.0, 2243.91],
[255.0, 0.0, 2243.91],
[959.5, 0.0, 2243.91],
[585.0, 0.0, 2243.91],
[1295.0, 0.0, 2243.91],
[1295.0, 0.0, 2243.91],
[807.09, 0.0, 876818227.47],
[817.09, 0.0, 869380711.89],
[898.48, 0.0, 493513797.83],
[898.48, 52.12, 2243.91],
[898.48, 0.0, 2243.91],
[898.48, 0.0, 2243.91],
[1418.69, 51.5, 552313993.29],
[1622.34, 51.5, 380202974.11],
[1622.34, 51.5, 2243.91],
[1622.34, 51.5, 2243.91],
[1622.34, 51.7, 2243.91],
[1641.94, 51.5, 2243.91],
[1670.0, 0.0, 228759416.25],
[1624.81, 9.0, 2243.91],
[1701.0, 30.0, 18071.32],
[1691.0, 30.0, 471678336.2],
[1701.0, 30.0, 2243.91],
[1701.0, 30.0, 2243.91],
[1809.83, 52.39, 2243.91],
[1701.0, 124.19, 431563291.85],
[1701.0, 124.19, 540582764.21],
[1701.0, 124.19, 2243.91],
[1870.5, 124.19, 2243.91],
[1701.0, 170.19, 2243.91],
[1701.0, 170.19, 34265465.99],
[1701.0, 170.19, 2243.91],
[2252.98, 170.19, 2243.91],
[1701.0, 200.11, 2243.91],
[1701.0, 251.09, 32489520.97],
[1701.0, 251.09, 2243.91],
[2205.27, 251.09, 2243.91],
[1701.0, 281.02, 2243.91],
[1701.0, 292.0, 2243.91],
[1701.0, 281.02, 2243.91],
[2014.05, 281.02, 2243.91],
[1870.5, 332.0, 2243.91],
[1701.0, 332.0, 2243.91],
[1701.0, 332.0, 2243.91],
[1701.0, 336.0, 2243.91],
[1718.0, 332.0, 2243.91],
[1701.0, 375.92, 2243.91],
[1701.0, 375.92, 2243.91],
[1763.12, 51.5, 2243.91],
[1788.05, 51.5, 678342841.42],
[1788.05, 51.5, 2243.91],
[1788.05, 51.5, 2243.91],
[1788.05, 51.7, 2243.91],
[1788.05, 51.7, 2243.91],
[1800.64, 46.62, 96645295.51],
[1816.39, 51.5, 2243.91],
[1821.39, 53.5, 2243.91],
[1821.39, 53.5, 2243.91],
[1831.41, 53.5, 2243.91],
[1670.0, 0.0, 228759416.25],
[1854.92, 30.0, 2243.91],
[1870.31, 26.31, 656771612.48],
[1838.08, 52.39, 2243.91],
[1701.0, 124.19, 502231880.4],
[1704.0, 124.19, 601815800.69],
[1704.0, 124.19, 483479983.11],
[1704.0, 124.19, 8190091.63],
[1749.66, 168.2, 2243.91],
[1780.45, 176.7, 2243.91],
[1701.0, 1020.0, 466377873.75],
[0.0, 123.0, 839562706.48],
[0.0, 123.0, 1031099603.81],
[240.0, 123.0, 636743412.26],
[240.0, 123.0, 636743412.26],
[720.0, 123.0, 467071034.94],
[695.0, 123.0, 828224059.77],
[762.17, 123.0, 474516827.01],
[762.17, 123.0, 474516827.01],
[762.17, 123.0, 474516827.01],
[762.17, 123.0, 2243.91],
[762.17, 123.0, 13959606917.61],
[824.64, 140.0, 37720649.22],
[841.64, 123.0, 2243.91],
[841.64, 123.0, 2243.91],
[913.45, 140.0, 33567373.73],
[930.45, 123.0, 2243.91],
[930.45, 123.0, 2243.91],
[1011.58, 140.0, 31588036.47],
[1028.58, 123.0, 2243.91],
[1028.58, 123.0, 2243.91],
[1140.81, 140.0, 34538040.23],
[0.0, 0.0, 1598296241.46],
[0.0, 0.0, 523430.37],
[0.0, 0.0, 78155449.89],
[0.0, 0.0, 78155449.89],
[0.0, 0.0, 147236577.13],
[696.98, 0.0, 2243.91],
[817.53, 0.0, 15303992.13],
[838.81, 0.0, 91783684.86],
[1029.73, 0.0, 11692734.08],
[1051.02, 0.0, 492277.06],
[0.0, 0.0, 71492.36],
[0.0, 0.0, 4980.35],
[0.0, 1082.0, 3001.69],
[0.0, 0.0, 354507897.97],
[0.0, 0.0, 84267.93],
[0.0, 0.0, 84267.93],
[0.0, 0.0, 2110388419.61],
[0.0, 0.0, 2595279695.35],
[0.0, 0.0, 1855309245.89],
[0.0, 0.0, 1855309245.89],
[177.31, 0.0, 2509357280.91],
[835.5, 0.0, 2243.91],
[843.5, 0.0, 2243.91],
[177.31, 0.0, 2509357280.91],
[0.0, 0.0, 770814538.69],
[0.0, 0.0, 374757639.85],
[0.0, 0.0, 5197268.89],
[177.31, 0.0, 621191020.21],
[177.31, 0.0, 36344895.78],
[887.31, 0.0, 347687184.4],
[887.31, 0.0, 4296348.84],
[1597.31, 0.0, 317302422.69],
[1597.31, 0.0, 2730263.51],
[2307.31, 0.0, 287248213.84],
[2307.31, 0.0, 2243.91],
[3017.31, 0.0, 331952660.77],
[3017.31, 0.0, 2243.91],
[3727.31, 0.0, 281839716.51],
[3727.31, 0.0, 2243.91],
[4437.31, 0.0, 80448089.83],
[4437.31, 0.0, 2243.91],
[5147.31, 0.0, 316679100.88],
[5147.31, 0.0, 2243.91],
[0.02, 0.0, 3104164808.61],
[0.02, 0.0, 2558966533.87],
[0.02, 0.0, 738824951.49],
[0.02, 0.0, 23503627.59],
[0.02, 0.0, 738824951.49],
[901.5, 0.0, 106962188.06],
[931.5, 0.0, 139907.86],
[931.5, 0.0, 31334054.22],
[931.5, 0.0, 3389534.91],
[968.0, 0.0, 2243.91],
[931.5, 0.0, 47652915.92],
[931.5, 0.0, 851931191.16],
[931.5, 0.0, 2243.91],
[933.5, 0.0, 2243.91],
[999.27, 0.0, 32857114.3],
[926.5, 0.0, 846383754.88],
[931.5, 0.0, 99091241.07],
[934.5, 0.0, 2243.91],
[934.5, 0.0, 2243.91],
[975.5, 0.0, 2243.91],
[978.5, 0.0, 2243.91],
[978.5, 0.0, 2243.91],
[1028.5, 0.0, 80500292.68],
[930.5, 0.0, 2243.91],
[931.5, 0.0, 539138729.99],
[931.5, 0.0, 2209328070.33],
[931.5, 0.0, 2243.91],
[930.5, 0.0, 2243.91],
[949.75, 0.0, 2031874226.27],
[987.75, 0.0, 2243.91],
[1021.0, 0.0, 2243.91],
[916.5, 0.0, 2185915115.75],
[916.5, 0.0, 405258570.93],
[931.5, 0.0, 1335241.73],
[931.5, 0.0, 2625436.83],
[945.5, 0.0, 33774116.2],
[950.5, 0.0, 182848.91],
[931.5, 0.0, 865920379.01],
[931.5, 0.0, 2436223658.17],
[1259.16, 0.0, 2708641682.46],
[1259.16, 0.0, 715823.11],
[1374.72, 0.0, 926074438.25],
[1374.72, 0.0, 11622849.63],
[931.5, 0.0, 1432822586.29],
[931.5, 0.0, 1357105091.16],
[901.5, 0.0, 139611909.69],
[0.0, 0.0, 32813436.52],
[0.0, 0.0, 97811008.42],
[0.0, 0.0, 2243.91],
[831.03, 0.0, 7079939.21],
[0.0, 0.0, 4132162.47],
[0.0, 0.0, 16547177.6],
[0.0, 0.0, 16547177.6],
[0.0, 0.0, 18748706.26],
[0.0, 0.0, 17653303.82],
[0.0, 0.0, 17653303.82],
[0.0, 0.0, 29241446.51],
[0.0, 0.0, 1053036.64],
[0.0, 0.0, 9950674.65],
[0.0, 0.0, 2243.91],
[0.0, 0.0, 2243.91],
[0.0, 481.94, 91684541.56],
[0.0, 481.94, 4778172.67],
[0.0, 481.94, 3506.88],
[0.0, 513.28, 4769.85],
[199.58, 515.28, 7374211.69],
[217.95, 515.28, 2243.91],
[477.75, 0.0, 16146883.13],
[489.75, 0.0, 1362464.79],
[489.75, 0.0, 1362464.79],
[489.75, 0.0, 5443127.45],
[489.75, 0.0, 2243.91],
[489.75, 0.0, 2243.91],
[489.75, 481.94, 102544627.62],
[489.75, 481.94, 2243.91],
[489.75, 481.94, 2243.91],
[489.75, 513.28, 2243.91],
[689.64, 515.28, 2243.91],
[707.39, 515.28, 2243.91],
[967.5, 0.0, 2486930.9],
[979.5, 0.0, 9554101.43],
[979.5, 0.0, 9554101.43],
[979.5, 0.0, 11009189.56],
[979.5, 0.0, 2243.91],
[979.5, 0.0, 189957332.52],
[979.5, 0.0, 2243.91],
[979.5, 0.0, 2243.91],
[979.5, 481.94, 68743370.18],
[979.5, 481.94, 46860050.14],
[979.5, 481.94, 2243.91],
[979.5, 513.28, 843383.29],
[1173.83, 515.28, 8065057.4],
[1202.72, 515.28, 1815871.75],
[1457.25, 0.0, 14652877.42],
[1469.25, 0.0, 14652877.42],
[1469.25, 0.0, 14652877.42],
[1469.25, 0.0, 14652877.42],
[1469.25, 0.0, 2243.91],
[1469.25, 0.0, 21293426.52],
[1469.25, 0.0, 2243.91],
[1469.25, 0.0, 2243.91],
[1469.25, 481.94, 196442917.96],
[1469.25, 481.94, 7524505.37],
[1469.25, 481.94, 2243.91],
[1469.25, 513.28, 1991424.87],
[1664.17, 515.28, 9821.74],
[1691.86, 515.28, 15104863.54],
[1947.0, 0.0, 20750601.14],
[1959.0, 0.0, 20191104.53],
[1959.0, 0.0, 20191104.53],
[1959.0, 0.0, 20191104.53],
[1959.0, 0.0, 2243.91],
[1959.0, 0.0, 1848709.03],
[1959.0, 0.0, 2243.91],
[1959.0, 0.0, 2243.91],
[1959.0, 481.94, 90656945.41],
[1959.0, 481.94, 1621374.06],
[1959.0, 481.94, 2243.91],
[1959.0, 513.28, 2243.91],
[2154.08, 515.28, 8178303.89],
[2181.45, 515.28, 2243.91],
[2436.75, 0.0, 2243.91],
[2448.75, 0.0, 2243.91],
[2448.75, 0.0, 2243.91],
[2448.75, 0.0, 2243.91],
[2448.75, 0.0, 2243.91],
[2448.75, 0.0, 1694836.93],
[2448.75, 0.0, 2243.91],
[2448.75, 0.0, 2243.91],
[2448.75, 481.94, 91339154.79],
[2448.75, 481.94, 2243.91],
[2448.75, 481.94, 2243.91],
[2448.75, 513.28, 2243.91],
[2643.41, 515.28, 2243.91],
[2671.64, 515.28, 2243.91],
[2926.5, 0.0, 2243.91],
[2938.5, 0.0, 2243.91],
[2938.5, 0.0, 2243.91],
[2938.5, 0.0, 2243.91],
[2938.5, 0.0, 2243.91],
[2938.5, 0.0, 7388104.39],
[2938.5, 0.0, 2243.91],
[2938.5, 0.0, 2243.91],
[2938.5, 481.94, 94692345.55],
[2938.5, 481.94, 2243.91],
[2938.5, 481.94, 2243.91],
[2938.5, 513.28, 2243.91],
[3137.86, 515.28, 3506.88],
[3156.67, 515.28, 2243.91],
[0.0, 535.78, 36503699.48],
[0.0, 132.8, 61046734.38],
[1955.0, 132.8, 609733.46],
[0.0, 535.78, 36503699.48],
[0.0, 650.53, 2243.91],
[240.0, 650.53, 28355966.16],
[0.0, 650.53, 4539470.95],
[0.0, 650.53, 1135129.83],
[240.0, 650.53, 2312530.5],
[240.0, 650.53, 2312530.5],
[255.0, 650.53, 1138645.1],
[0.0, 650.53, 9065331.25],
[0.0, 650.53, 5669409.94],
[15.0, 680.53, 42956091.31],
[15.0, 680.53, 42956091.31],
[15.0, 680.53, 20747822.6],
[15.0, 730.53, 8085264.95],
[255.0, 730.53, 23190410.52],
[255.0, 730.53, 5054132.06],
[255.0, 730.53, 5827912.93],
[255.0, 730.53, 5827912.93],
[255.0, 730.53, 5827912.93],
[255.0, 730.53, 17178663.62],
[255.0, 730.53, 2243.91],
[255.0, 730.53, 2243.91],
[255.0, 761.95, 675829.0],
[255.0, 761.95, 675829.0],
[255.0, 761.95, 675829.0],
[255.0, 761.95, 2243.91],
[255.0, 776.95, 2243.91],
[494.69, 730.53, 4621353.64],
[494.69, 730.53, 5459034.88],
[494.69, 730.53, 5459034.88],
[494.69, 730.53, 5459034.88],
[494.69, 730.53, 1012621.54],
[494.69, 730.53, 2243.91],
[494.69, 730.53, 2243.91],
[494.69, 761.95, 2243.91],
[494.69, 761.95, 2243.91],
[494.69, 761.95, 2243.91],
[494.69, 761.95, 2243.91],
[494.69, 776.95, 2243.91],
[734.38, 730.53, 6123869.38],
[734.38, 730.53, 6123869.38],
[734.38, 730.53, 6123869.38],
[734.38, 730.53, 2243.91],
[734.38, 730.53, 2243.91],
[734.38, 730.53, 2243.91],
[734.38, 761.95, 2243.91],
[734.38, 761.95, 2243.91],
[734.38, 761.95, 2243.91],
[734.38, 761.95, 2243.91],
[734.38, 761.95, 2243.91],
[734.38, 776.95, 2243.91],
[734.38, 807.38, 2780782.39],
[734.38, 807.38, 2780782.39],
[734.38, 807.38, 2243.91],
[734.38, 807.38, 2243.91],
[734.38, 837.8, 8455736.75],
[734.38, 837.8, 8455736.75],
[734.38, 837.8, 2243.91],
[734.38, 837.8, 2243.91],
[734.38, 868.22, 17292932.52],
[734.38, 868.22, 17292932.52],
[734.38, 868.22, 2243.91],
[734.38, 868.22, 2243.91],
[734.38, 898.64, 5475122.74],
[734.38, 898.64, 5475122.74],
[734.38, 898.64, 2243.91],
[734.38, 898.64, 2243.91],
[974.06, 730.53, 5180429.26],
[974.06, 730.53, 31173383.13],
[974.06, 730.53, 31173383.13],
[974.06, 730.53, 31173383.13],
[974.06, 730.53, 1012621.54],
[974.06, 730.53, 2243.91],
[974.06, 730.53, 2243.91],
[974.06, 761.95, 2414520.5],
[974.06, 761.95, 2414520.5],
[974.06, 761.95, 4885735.79],
[974.06, 761.95, 4885735.79],
[974.06, 761.95, 2243.91],
[974.06, 776.95, 2243.91],
[974.06, 807.38, 3370169.34],
[974.06, 807.38, 3370169.34],
[974.06, 807.38, 2243.91],
[974.06, 807.38, 2243.91],
[974.06, 837.8, 3538565.61],
[974.06, 837.8, 3538565.61],
[974.06, 837.8, 2243.91],
[974.06, 837.8, 2243.91],
[1213.75, 730.53, 8085264.95],
[1213.75, 730.53, 7864329.04],
[1213.75, 730.53, 7864329.04],
[1213.75, 730.53, 7864329.04],
[1213.75, 768.53, 4725759.33],
[1213.75, 768.53, 32125832.44],
[1213.75, 768.53, 32125832.44],
[1212.75, 767.53, 2243.91],
[1213.75, 768.53, 2243.91],
[1213.75, 768.53, 533323.65],
[1213.75, 768.53, 2243.91],
[1576.62, 768.53, 2243.91],
[1228.75, 776.53, 2243.91],
[1213.75, 838.53, 3639603.38],
[1213.75, 838.53, 6987658.05],
[1213.75, 838.53, 6987658.05],
[15.0, 979.06, 2243.91],
[255.0, 1005.06, 67450634.1],
[255.0, 1005.06, 10033850.38],
[255.0, 1005.06, 10033850.38],
[255.0, 1005.06, 455903.46],
[255.0, 1005.06, 19558229.24],
[255.0, 1005.06, 19558229.24],
[960.0, 1005.06, 528482.26],
[960.0, 1005.06, 528482.26],
[960.0, 1015.56, 3404690.58],
[960.0, 1015.56, 3404690.58],
[1565.0, 1015.56, 2243.91],
[1844.0, 1004.0, 2243.91],
[1859.5, 1019.5, 50221372.49],
[0.0, 1080.08, 2243.91],
[0.0, 0.0, 2243.91],
[0.0, 1079.08, 2243.91],
      ];

  // Créer un objet Image pour obtenir les dimensions réelles de l'image de fond
  const img = new Image();
  img.src = imageUrl;

  img.onload = () => {
    const container = document.getElementById('container');
    const heatmapContainer = document.getElementById('heatmapContainer');

    // Adapter le container et le heatmap à la taille réelle de l’image
    container.style.width = img.width + 'px';
    container.style.height = img.height + 'px';
    heatmapContainer.style.width = img.width + 'px';
    heatmapContainer.style.height = img.height + 'px';

    // Créer la heatmap
    const heatmap = h337.create({
      container: heatmapContainer,
      radius: 40,
      maxOpacity: 0.6,
      minOpacity: 0.1,
      blur: 0.8,
      gradient: {
        '0.1': 'blue',
        '0.5': 'cyan',
        '0.7': 'lime',
        '0.95': 'red'
      }
    });

    const adjusted = RAW_POINTS.map(([x, y, val]) => ({
      x: Math.round(x),
      y: Math.round(y === 0 ? img.height / 2 : y),
      value: Math.round(val)
    }));

    heatmap.setData({
      max: Math.max(...adjusted.map(p => p.value)),
      data: adjusted
    });
  };
</script>

</body>
</html>
